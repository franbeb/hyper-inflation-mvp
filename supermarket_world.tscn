[gd_scene load_steps=18 format=3 uid="uid://ba7r6307v33ob"]

[ext_resource type="Script" uid="uid://dklv8v0d4amif" path="res://main.gd" id="1_15x1o"]
[ext_resource type="PackedScene" uid="uid://b66ewl3hveivq" path="res://player.tscn" id="2_3uddc"]
[ext_resource type="PackedScene" uid="uid://b0pkr5yhvt50g" path="res://world/estanteria_pared_simple.tscn" id="3_ncwd6"]
[ext_resource type="PackedScene" uid="uid://bwuox31tiu8up" path="res://world/estanteria_pared_doble.tscn" id="4_r0ces"]
[ext_resource type="PackedScene" uid="uid://6rqjd8rybxrj" path="res://NPCs/npc.tscn" id="5_15x1o"]
[ext_resource type="PackedScene" uid="uid://dmkm4w56peex5" path="res://objetos/pistola.tscn" id="5_nrmsc"]
[ext_resource type="PackedScene" uid="uid://i8ni8t7pw7ak" path="res://world/cashier.tscn" id="6_3uddc"]
[ext_resource type="PackedScene" uid="uid://dubfjs2pqs6nt" path="res://world/scoring.tscn" id="7_nrmsc"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_2esgm"]

[sub_resource type="Sky" id="Sky_b0o8s"]
sky_material = SubResource("ProceduralSkyMaterial_2esgm")

[sub_resource type="Environment" id="Environment_1bvp3"]
background_mode = 2
sky = SubResource("Sky_b0o8s")
tonemap_mode = 2
sdfgi_enabled = true

[sub_resource type="NavigationMesh" id="NavigationMesh_3uddc"]
vertices = PackedVector3Array(-24, 0.9689673, -19.776798, -21, 0.9689673, -19.776798, -21, 0.9689673, -20.526798, 20.5, 0.9689673, -21.276798, 21.25, 0.9689673, -20.026798, 24, 0.9689673, -20.026798, 24, 0.9689673, -34.5268, -20.25, 0.9689673, -21.276798, -24, 0.9689673, -34.5268, 21.25, 0.9689673, -19.276798, 20.5, 0.9689673, 6.9732018, 21.25, 0.9689673, 8.223202, 24, 0.9689673, 8.223202, 20.5, 0.9689673, -18.526798, 11.25, 0.9689673, -18.526798, 11.25, 0.9689673, 6.9732018, -24, 0.9689673, 8.223202, -21, 0.9689673, 8.223202, -20.25, 0.9689673, 6.9732018, -20.25, 0.9689673, -18.526798, -6.25, 0.9689673, 6.9732018, -6.25, 0.9689673, -18.526798, 1.25, 0.9689673, -8.276798, 2.25, 0.9689673, -8.276798, 1.75, 0.9689673, -10.526798, -0.75, 0.9689673, -10.526798, -2.5, 0.9689673, -1.7767982, 0.5, 0.9689673, -1.7767982, 0.5, 0.9689673, -7.5267982, -2.5, 0.9689673, -7.5267982, -1.5, 0.9689673, -11.276798, -3.25, 0.9689673, -8.026798, -1.5, 0.9689673, -13.276798, -3.25, 0.9689673, -18.526798, -0.75, 0.9689673, -14.026798, 1.25, 0.9689673, -14.026798, 1.25, 0.9689673, -18.526798, 2, 0.9689673, -13.276798, 3, 0.9689673, -13.276798, 3.75, 0.9689673, -12.026798, 7.25, 0.9689673, -12.026798, 7.25, 0.9689673, -18.526798, 3, 0.9689673, -10.526798, 3.5, 0.9689673, -8.276798, 3.75, 0.9689673, -11.276798, 4.25, 0.9689673, -7.5267982, 6.5, 0.9689673, -7.2767982, 7.25, 0.9689673, -7.7767982, 6.5, 0.9689673, 0.22320175, 4.25, 0.9689673, 0.47320175, 3.25, 0.9689673, 1.2232018, 3.5, 0.9689673, 3.7232018, 7.25, 0.9689673, 3.4732018, 7.25, 0.9689673, 0.72320175, 5.5, 0.9689673, 6.9732018, 5, 0.9689673, 6.2232018, 3.75, 0.9689673, 6.2232018, -3.25, 0.9689673, 6.9732018, 3, 0.9689673, 4.2232018, 1.25, 0.9689673, 1.2232018, 3, 0.9689673, 5.4732018, -2.5, 0.9689673, 0.22320175, 0.5, 0.9689673, 0.47320175, -3.25, 0.9689673, 0.72320175, -24, 0.9689673, 14.723202, -21, 0.9689673, 14.723202, -21, 0.9689673, 13.973202, -21, 0.9689673, 8.973202, -20.25, 0.9689673, 13.223202, -18.25, 0.9689673, 13.223202, -18.25, 0.9689673, 9.723202, -20.25, 0.9689673, 9.723202, 21.25, 0.9689673, 13.973202, 21.25, 0.9689673, 14.723202, 24, 0.9689673, 14.723202, 21.25, 0.9689673, 8.973202, 20.5, 0.9689673, 9.723202, 20.5, 0.9689673, 13.223202, 18.5, 0.9689673, 9.723202, 18.5, 0.9689673, 13.223202, -6.25, 0.9689673, 13.223202, -6.25, 0.9689673, 9.723202, -3.25, 0.9689673, 9.723202, -3.25, 0.9689673, 13.223202, 7.25, 0.9689673, 13.223202, 7.25, 0.9689673, 9.723202, 11.25, 0.9689673, 9.723202, 11.25, 0.9689673, 13.223202, -4.75, 0.9689673, 23.973202, -4.75, 0.9689673, 21.223202, -5.5, 0.9689673, 21.223202, -6.25, 0.9689673, 20.473202, -20.25, 0.9689673, 15.973202, -24, 0.9689673, 23.973202, -6.25, 0.9689673, 15.973202, 10.5, 0.9689673, 21.223202, 9.25, 0.9689673, 21.223202, 9.25, 0.9689673, 23.973202, 20.5, 0.9689673, 15.973202, 11.25, 0.9689673, 20.473202, 24, 0.9689673, 23.973202, 11.25, 0.9689673, 15.973202, -4, 0.9689673, 21.223202, 8, 0.9689673, 21.223202, -3.25, 0.9689673, 20.473202, 7.25, 0.9689673, 20.473202, 7.25, 0.9689673, 15.973202, -3.25, 0.9689673, 15.973202)
polygons = [PackedInt32Array(2, 1, 0), PackedInt32Array(4, 3, 5), PackedInt32Array(5, 3, 6), PackedInt32Array(2, 0, 7), PackedInt32Array(7, 0, 8), PackedInt32Array(3, 7, 6), PackedInt32Array(6, 7, 8), PackedInt32Array(9, 4, 5), PackedInt32Array(9, 5, 13), PackedInt32Array(13, 5, 10), PackedInt32Array(10, 5, 11), PackedInt32Array(11, 5, 12), PackedInt32Array(10, 15, 13), PackedInt32Array(13, 15, 14), PackedInt32Array(1, 19, 0), PackedInt32Array(0, 19, 18), PackedInt32Array(0, 18, 17), PackedInt32Array(0, 17, 16), PackedInt32Array(19, 21, 18), PackedInt32Array(18, 21, 20), PackedInt32Array(23, 22, 24), PackedInt32Array(24, 22, 25), PackedInt32Array(29, 28, 26), PackedInt32Array(26, 28, 27), PackedInt32Array(22, 28, 25), PackedInt32Array(25, 28, 30), PackedInt32Array(30, 28, 29), PackedInt32Array(30, 29, 31), PackedInt32Array(30, 31, 32), PackedInt32Array(32, 31, 33), PackedInt32Array(36, 35, 34), PackedInt32Array(32, 33, 34), PackedInt32Array(34, 33, 36), PackedInt32Array(38, 37, 35), PackedInt32Array(40, 39, 38), PackedInt32Array(35, 36, 38), PackedInt32Array(38, 36, 41), PackedInt32Array(38, 41, 40), PackedInt32Array(43, 23, 42), PackedInt32Array(42, 23, 24), PackedInt32Array(46, 45, 47), PackedInt32Array(47, 45, 43), PackedInt32Array(47, 43, 44), PackedInt32Array(47, 44, 40), PackedInt32Array(43, 42, 44), PackedInt32Array(48, 53, 49), PackedInt32Array(49, 53, 50), PackedInt32Array(50, 53, 51), PackedInt32Array(51, 53, 52), PackedInt32Array(46, 48, 45), PackedInt32Array(45, 48, 49), PackedInt32Array(44, 39, 40), PackedInt32Array(55, 54, 56), PackedInt32Array(56, 54, 57), PackedInt32Array(51, 58, 50), PackedInt32Array(50, 58, 59), PackedInt32Array(60, 56, 57), PackedInt32Array(26, 27, 61), PackedInt32Array(61, 27, 62), PackedInt32Array(59, 58, 62), PackedInt32Array(62, 58, 60), PackedInt32Array(62, 60, 63), PackedInt32Array(63, 60, 57), PackedInt32Array(62, 63, 61), PackedInt32Array(66, 65, 64), PackedInt32Array(16, 17, 67), PackedInt32Array(71, 70, 68), PackedInt32Array(68, 70, 69), PackedInt32Array(67, 71, 16), PackedInt32Array(16, 71, 68), PackedInt32Array(16, 68, 66), PackedInt32Array(16, 66, 64), PackedInt32Array(74, 73, 72), PackedInt32Array(75, 11, 12), PackedInt32Array(75, 12, 76), PackedInt32Array(76, 12, 77), PackedInt32Array(77, 12, 72), PackedInt32Array(72, 12, 74), PackedInt32Array(76, 77, 78), PackedInt32Array(78, 77, 79), PackedInt32Array(70, 81, 69), PackedInt32Array(69, 81, 80), PackedInt32Array(85, 84, 82), PackedInt32Array(82, 84, 83), PackedInt32Array(87, 86, 79), PackedInt32Array(79, 86, 78), PackedInt32Array(90, 89, 88), PackedInt32Array(90, 88, 91), PackedInt32Array(91, 88, 92), PackedInt32Array(92, 88, 93), PackedInt32Array(65, 92, 64), PackedInt32Array(64, 92, 93), PackedInt32Array(92, 94, 91), PackedInt32Array(97, 96, 95), PackedInt32Array(98, 73, 74), PackedInt32Array(95, 99, 97), PackedInt32Array(97, 99, 98), PackedInt32Array(97, 98, 74), PackedInt32Array(97, 74, 100), PackedInt32Array(99, 101, 98), PackedInt32Array(88, 89, 102), PackedInt32Array(103, 96, 97), PackedInt32Array(102, 104, 88), PackedInt32Array(88, 104, 105), PackedInt32Array(88, 105, 103), PackedInt32Array(88, 103, 97), PackedInt32Array(104, 107, 105), PackedInt32Array(105, 107, 106)]
cell_height = 0.7
agent_radius = 1.0

[sub_resource type="BoxShape3D" id="BoxShape3D_r0ces"]
size = Vector3(40, 7, 0.5)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_15x1o"]
albedo_color = Color(2.033, 1.275891, 0.729203, 1)

[sub_resource type="BoxMesh" id="BoxMesh_3uddc"]
material = SubResource("StandardMaterial3D_15x1o")
size = Vector3(40, 7, 0.5)

[sub_resource type="BoxShape3D" id="BoxShape3D_7dm0k"]
size = Vector3(50, 0.2, 50)

[sub_resource type="BoxMesh" id="BoxMesh_ig7tw"]
size = Vector3(50, 0.2, 50)

[node name="Main" type="Node3D"]
script = ExtResource("1_15x1o")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_1bvp3")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.8660254, -0.43301278, 0.25, 0, 0.49999997, 0.86602545, -0.50000006, 0.75, -0.43301266, 0, 0, 0)
light_energy = 0.2
shadow_enabled = true

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_3uddc")

[node name="World" type="Node" parent="NavigationRegion3D"]

[node name="Pared" type="Node" parent="NavigationRegion3D/World"]

[node name="StaticBody3D" type="StaticBody3D" parent="NavigationRegion3D/World/Pared"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.7738781, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/World/Pared/StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3.8428454, -19.988686)
shape = SubResource("BoxShape3D_r0ces")

[node name="MeshInstance3D" type="MeshInstance3D" parent="NavigationRegion3D/World/Pared/StaticBody3D/CollisionShape3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.011857986)
mesh = SubResource("BoxMesh_3uddc")

[node name="StaticBody3D2" type="StaticBody3D" parent="NavigationRegion3D/World/Pared"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.7738781, 21.75764)

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/World/Pared/StaticBody3D2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3.8428454, -7.134534)
shape = SubResource("BoxShape3D_r0ces")

[node name="MeshInstance3D" type="MeshInstance3D" parent="NavigationRegion3D/World/Pared/StaticBody3D2/CollisionShape3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -6.260498)
mesh = SubResource("BoxMesh_3uddc")

[node name="StaticBody3D3" type="StaticBody3D" parent="NavigationRegion3D/World/Pared"]
transform = Transform3D(-4.371139e-08, 0, -1, 0, 1, 0, 1, 0, -4.371139e-08, 13, -0.7738781, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/World/Pared/StaticBody3D3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.5196242e-07, 3.8428454, 3.205162)
shape = SubResource("BoxShape3D_r0ces")

[node name="MeshInstance3D" type="MeshInstance3D" parent="NavigationRegion3D/World/Pared/StaticBody3D3/CollisionShape3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.1877237e-08, 0, 1.1868134)
mesh = SubResource("BoxMesh_3uddc")

[node name="StaticBody3D4" type="StaticBody3D" parent="NavigationRegion3D/World/Pared"]
transform = Transform3D(-4.371139e-08, 0, -1, 0, 1, 0, 1, 0, -4.371139e-08, -27, -0.7738781, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/World/Pared/StaticBody3D4"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.6334167e-07, 3.8428454, -22.310022)
shape = SubResource("BoxShape3D_r0ces")

[node name="MeshInstance3D" type="MeshInstance3D" parent="NavigationRegion3D/World/Pared/StaticBody3D4/CollisionShape3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7.0708666e-09, 0, 0.16176796)
mesh = SubResource("BoxMesh_3uddc")

[node name="Estanterias" type="Node" parent="NavigationRegion3D/World"]

[node name="EstanteriaParedDoble5" parent="NavigationRegion3D/World/Estanterias" instance=ExtResource("4_r0ces")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.3958533, 0, -6.0893307)

[node name="EstanteriaParedDoble6" parent="NavigationRegion3D/World/Estanterias" instance=ExtResource("4_r0ces")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.3958533, 0, -4.3003445)

[node name="EstanteriaParedDoble7" parent="NavigationRegion3D/World/Estanterias" instance=ExtResource("4_r0ces")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.3958533, 0, -2.5140266)

[node name="EstanteriaParedDoble8" parent="NavigationRegion3D/World/Estanterias" instance=ExtResource("4_r0ces")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.3958533, 0, -0.72504044)

[node name="EstanteriaParedSimple2" parent="NavigationRegion3D/World/Estanterias" instance=ExtResource("3_ncwd6")]
transform = Transform3D(-1, 0, 2.6226832e-07, 0, 1, 0, -2.6226832e-07, 0, -1, 8.366296, 0, -2.6536763)

[node name="EstanteriaParedSimple" parent="NavigationRegion3D/World/Estanterias" instance=ExtResource("3_ncwd6")]
transform = Transform3D(-1, 0, 8.742278e-08, 0, 1, 0, -8.742278e-08, 0, -1, 8.366798, 0, -1.0233498)

[node name="EstanteriaParedSimple3" parent="NavigationRegion3D/World/Estanterias" instance=ExtResource("3_ncwd6")]
transform = Transform3D(-1, 0, 2.6226832e-07, 0, 1, 0, -2.6226832e-07, 0, -1, 8.366296, 0, -6.0642347)

[node name="EstanteriaParedSimple4" parent="NavigationRegion3D/World/Estanterias" instance=ExtResource("3_ncwd6")]
transform = Transform3D(-1, 0, 8.742278e-08, 0, 1, 0, -8.742278e-08, 0, -1, 8.366798, 0, -4.433908)

[node name="EstanteriaParedSimple5" parent="NavigationRegion3D/World/Estanterias" instance=ExtResource("3_ncwd6")]
transform = Transform3D(1, 0, -3.496911e-07, 0, 1, 0, 3.496911e-07, 0, 1, -4.3659153, 0, -4.4339085)

[node name="EstanteriaParedSimple6" parent="NavigationRegion3D/World/Estanterias" instance=ExtResource("3_ncwd6")]
transform = Transform3D(1, 0, -1.7484555e-07, 0, 1, 0, 1.7484555e-07, 0, 1, -4.366418, 0, -6.0642347)

[node name="EstanteriaParedSimple7" parent="NavigationRegion3D/World/Estanterias" instance=ExtResource("3_ncwd6")]
transform = Transform3D(1, 0, -3.496911e-07, 0, 1, 0, 3.496911e-07, 0, 1, -4.3659153, 0, -1.0233498)

[node name="EstanteriaParedSimple8" parent="NavigationRegion3D/World/Estanterias" instance=ExtResource("3_ncwd6")]
transform = Transform3D(1, 0, -1.7484555e-07, 0, 1, 0, 1.7484555e-07, 0, 1, -4.366418, 0, -2.6536765)

[node name="Cashiers" type="Node" parent="NavigationRegion3D/World"]

[node name="Cashier2" parent="NavigationRegion3D/World/Cashiers" instance=ExtResource("6_3uddc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.924654, 0.394464, 5.827795)

[node name="Cashier" parent="NavigationRegion3D/World/Cashiers" instance=ExtResource("6_3uddc")]
transform = Transform3D(-1, 0, 8.742278e-08, 0, 1, 0, -8.742278e-08, 0, -1, 0.977221, 0.394464, -12.892104)

[node name="NavigationObstacle3D" type="NavigationObstacle3D" parent="NavigationRegion3D/World"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -5.5953836)
visible = false
radius = 3.55
affect_navigation_mesh = true

[node name="Suelo" type="StaticBody3D" parent="NavigationRegion3D/World"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/World/Suelo"]
shape = SubResource("BoxShape3D_7dm0k")

[node name="MeshInstance3D" type="MeshInstance3D" parent="NavigationRegion3D/World/Suelo/CollisionShape3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -10.526799)
mesh = SubResource("BoxMesh_ig7tw")

[node name="Player" parent="." instance=ExtResource("2_3uddc")]
transform = Transform3D(0.39458355, 0, -0.9188601, 0, 1, 0, 0.9188601, 0, 0.39458355, 0.050012555, 1.637661, -3.0379534)

[node name="PickableObject4" parent="." instance=ExtResource("5_nrmsc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.61409587, 0)

[node name="PickableObject3" parent="." instance=ExtResource("5_nrmsc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.1905562, 0.60171264, 0)

[node name="Timer" type="Timer" parent="."]
wait_time = 2.0
one_shot = true
autostart = true

[node name="NPC" parent="." instance=ExtResource("5_15x1o")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6.077835, 1.2474838, -9.928776)

[node name="NPC3" parent="." instance=ExtResource("5_15x1o")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.7143, 1.2474838, -9.928776)

[node name="NPC2" parent="." instance=ExtResource("5_15x1o")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.6009016, 1.2474838, -9.928776)

[node name="PickableObject" parent="." instance=ExtResource("5_nrmsc")]

[node name="Timer2" type="Timer" parent="."]
autostart = true

[node name="Scoring" parent="." instance=ExtResource("7_nrmsc")]
transform = Transform3D(1.7748032, 0, 0, 0, 1.7587559, 0, 0, 0, 2, 1.8246126, 3.801199, -18.972164)

[connection signal="timeout" from="Timer" to="." method="_on_timer_timeout"]
[connection signal="item_checkout" from="NPC" to="." method="_on_npc_item_checkout"]
[connection signal="item_checkout" from="NPC3" to="." method="_on_npc_item_checkout"]
[connection signal="item_checkout" from="NPC2" to="." method="_on_npc_item_checkout"]
[connection signal="timeout" from="Timer2" to="." method="_on_timer_2_timeout"]
